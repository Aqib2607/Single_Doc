import{r as o,j as e,B as d,X as N}from"./app-CEoN3nb7.js";import{H as b}from"./Helmet-BTcaEctK.js";import{C as P,b as w,c as C,d as k,a as E}from"./card-Db-WEhk7.js";import{I as l}from"./input-DZCcOFjF.js";import{L as i}from"./label-CarGSy8y.js";import{T as S}from"./textarea-BBwsMnbp.js";import{N as A,F as D}from"./Footer-qMXzDiRv.js";import{D as T}from"./DoctorSidebar-ugTys2RU.js";import{U as F}from"./users-BUxCXu4p.js";import{P as z}from"./plus-DPZgs52g.js";import{S as _}from"./square-pen-De6r2DRm.js";import{T as B}from"./trash-2-BXHwlNFd.js";import"./index-Bcg0Mu0T.js";import"./Combination-BghPHJq8.js";import"./stethoscope-BzYB2mbc.js";import"./file-text-CHhrgst4.js";import"./message-square-DXyYJdc3.js";import"./pill-C3JZLNnZ.js";const ae=()=>{const[x,j]=o.useState([]),[g,m]=o.useState(!1),[n,u]=o.useState(null),[a,r]=o.useState({name:"",email:"",phone:"",age:"",address:"",medical_history:""});o.useEffect(()=>{h()},[]);const h=async()=>{try{const s=localStorage.getItem("token"),t=await fetch("/api/patients",{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});if(t.ok){const c=await t.json();j(c)}}catch(s){console.error("Error fetching patients:",s)}},f=async s=>{s.preventDefault();try{const t=localStorage.getItem("token"),c=n?`/api/patients/${n.id}`:"/api/patients";(await fetch(c,{method:n?"PUT":"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify(a)})).ok&&(h(),p(),alert(n?"Patient updated successfully!":"Patient added successfully!"))}catch(t){console.error("Error saving patient:",t)}},v=s=>{u(s),r({name:s.name||"",email:s.email||"",phone:s.phone||"",age:s.age||"",address:s.address||"",medical_history:s.medical_history||""}),m(!0)},y=async s=>{if(confirm("Are you sure you want to delete this patient?"))try{const t=localStorage.getItem("token");(await fetch(`/api/patients/${s}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}})).ok&&(h(),alert("Patient deleted successfully!"))}catch(t){console.error("Error deleting patient:",t)}},p=()=>{r({name:"",email:"",phone:"",age:"",address:"",medical_history:""}),u(null),m(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(b,{children:e.jsx("title",{children:"Patients - Doctor Dashboard"})}),e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(A,{}),e.jsxs("div",{className:"flex pt-20",children:[e.jsx(T,{}),e.jsx("main",{className:"flex-1 px-6 py-8",children:e.jsxs("div",{className:"container mx-auto max-w-6xl",children:[e.jsxs("div",{className:"mb-8 animate-fade-in-up",children:[e.jsx("h1",{className:"text-4xl font-display font-bold text-gradient mb-4",children:"My Patients"}),e.jsx("p",{className:"text-xl text-muted-foreground",children:"Manage your patient records and information"})]}),e.jsxs(P,{className:"shadow-card border-border bg-card",children:[e.jsxs(w,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(F,{className:"h-5 w-5 text-primary"}),"Patient List"]}),e.jsx(k,{children:"View and manage all your patients"})]}),e.jsxs(d,{onClick:()=>m(!0),className:"gradient-primary shadow-elegant",children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),"Add Patient"]})]}),e.jsxs(E,{children:[g&&e.jsxs("form",{onSubmit:f,className:"mb-6 p-4 border border-border rounded-lg bg-muted/30",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:n?"Edit Patient":"Add New Patient"}),e.jsx(d,{type:"button",onClick:p,variant:"ghost",size:"sm",children:e.jsx(N,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{children:"Name *"}),e.jsx(l,{value:a.name,onChange:s=>r({...a,name:s.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(i,{children:"Email *"}),e.jsx(l,{type:"email",value:a.email,onChange:s=>r({...a,email:s.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(i,{children:"Phone"}),e.jsx(l,{value:a.phone,onChange:s=>r({...a,phone:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(i,{children:"Age"}),e.jsx(l,{type:"number",value:a.age,onChange:s=>r({...a,age:s.target.value})})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx(i,{children:"Address"}),e.jsx(l,{value:a.address,onChange:s=>r({...a,address:s.target.value})})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx(i,{children:"Medical History"}),e.jsx(S,{value:a.medical_history,onChange:s=>r({...a,medical_history:s.target.value})})]}),e.jsx("div",{className:"col-span-2",children:e.jsx(d,{type:"submit",className:"w-full",children:n?"Update Patient":"Add Patient"})})]})]}),e.jsxs("div",{className:"space-y-4",children:[x.map(s=>e.jsxs("div",{className:"flex justify-between items-center p-4 border border-border rounded-lg bg-muted/50 hover:bg-muted transition-smooth",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground",children:s.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Email: ",s.email," | Phone: ",s.phone]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Age: ",s.age," | Address: ",s.address]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(d,{onClick:()=>v(s),size:"sm",variant:"outline",children:e.jsx(_,{className:"h-4 w-4"})}),e.jsx(d,{onClick:()=>y(s.id),size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700",children:e.jsx(B,{className:"h-4 w-4"})})]})]},s.id)),x.length===0&&e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:'No patients found. Click "Add Patient" to create your first patient record.'})]})]})]})]})})]}),e.jsx(D,{})]})]})};export{ae as default};
