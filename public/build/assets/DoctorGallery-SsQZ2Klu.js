import{c as D,m as L,r as n,j as e,B as c,t as a}from"./app-63SFHjIa.js";import{H as M}from"./Helmet-C7MJ7xcl.js";import{D as G}from"./DoctorSidebar-DPL6hirz.js";import{N as P,F as V}from"./Footer-DAIF9c2c.js";import{C as $,b as B,c as O,d as q}from"./card-D5r0uYXZ.js";import{I as y}from"./input-fVX1XM3m.js";import{T as H}from"./textarea-GKQefUXT.js";import{L as d}from"./label-BELa0fME.js";import{S as f,a as v,b as N,c as b,d as h}from"./select-C72w9gwg.js";import{D as U,b as J,a as R,c as _,d as K}from"./dialog-DOUGUkgN.js";import{P as Q}from"./plus-CJLtuB9E.js";import{S as W}from"./square-pen-DpmkVY-T.js";import{T as X}from"./trash-2-y5Z9t80N.js";import"./users-DoOIvz7r.js";import"./clock-D4NSwhJ7.js";import"./stethoscope-swE3rh3U.js";import"./file-text-NisEOZJR.js";import"./message-square-CnSM-t_7.js";import"./pill-Dedl5hRm.js";import"./index-D6qhZrlk.js";import"./Combination-ca_GfZQ4.js";import"./index-BdQq_4o_.js";import"./index-Bx8KKt3b.js";import"./chevron-down-Cm3MJSN1.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=D("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=D("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]),be=()=>{const{user:l}=L(),[g,k]=n.useState([]),[w,E]=n.useState(!0),[T,x]=n.useState(!1),[m,u]=n.useState(null),[s,o]=n.useState({title:"",description:"",url:"",type:"image",category:""}),F=["Facilities","Equipment","Staff","Procedures","Patient Care"],p=async()=>{try{const t=localStorage.getItem("token"),r=await fetch("/api/doctor-galleries",{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(r.ok){const i=await r.json();k(i)}else a({title:"Error",description:"Failed to fetch galleries",variant:"destructive"})}catch{a({title:"Error",description:"Failed to fetch galleries",variant:"destructive"})}finally{E(!1)}};n.useEffect(()=>{(l==null?void 0:l.role)==="doctor"&&p()},[l]);const I=async t=>{t.preventDefault();const r=localStorage.getItem("token");try{m?(await fetch(`/api/galleries/${m.id}`,{method:"PUT",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify(s)})).ok?(a({title:"Success",description:"Gallery item updated successfully"}),p()):a({title:"Error",description:"Failed to update gallery item",variant:"destructive"}):(await fetch("/api/galleries",{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify({...s,doctor_id:l==null?void 0:l.id})})).ok?(a({title:"Success",description:"Gallery item added successfully"}),p()):a({title:"Error",description:"Failed to add gallery item",variant:"destructive"}),j()}catch{a({title:"Error",description:"An error occurred",variant:"destructive"})}},j=()=>{o({title:"",description:"",url:"",type:"image",category:""}),u(null),x(!1)},z=t=>{u(t),o({title:t.title,description:t.description,url:t.url,type:t.type,category:t.category}),x(!0)},A=async t=>{const r=localStorage.getItem("token");try{(await fetch(`/api/galleries/${t}`,{method:"DELETE",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}})).ok?(a({title:"Success",description:"Gallery item deleted successfully"}),p()):a({title:"Error",description:"Failed to delete gallery item",variant:"destructive"})}catch{a({title:"Error",description:"An error occurred",variant:"destructive"})}};return e.jsxs(e.Fragment,{children:[e.jsx(M,{children:e.jsx("title",{children:"Gallery Management - Doctor Dashboard"})}),e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(P,{}),e.jsxs("div",{className:"flex pt-20",children:[e.jsx(G,{}),e.jsx("main",{className:"flex-1 px-6 py-8",children:e.jsxs("div",{className:"container mx-auto max-w-6xl",children:[e.jsxs("div",{className:"mb-8 animate-fade-in-up",children:[e.jsx("h1",{className:"text-4xl font-display font-bold text-gradient mb-4",children:"Gallery Management"}),e.jsx("p",{className:"text-xl text-muted-foreground",children:"Manage your clinic's images and videos"})]}),e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("div",{}),e.jsxs(U,{open:T,onOpenChange:x,children:[e.jsx(J,{asChild:!0,children:e.jsxs(c,{onClick:()=>u(null),className:"gradient-primary",children:[e.jsx(Q,{size:20,className:"mr-2"}),"Add Media"]})}),e.jsxs(R,{className:"max-w-2xl",children:[e.jsx(_,{children:e.jsx(K,{children:m?"Edit Media":"Add New Media"})}),e.jsxs("form",{onSubmit:I,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"title",children:"Title"}),e.jsx(y,{id:"title",value:s.title,onChange:t=>o({...s,title:t.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"type",children:"Media Type"}),e.jsxs(f,{value:s.type,onValueChange:t=>o({...s,type:t}),children:[e.jsx(v,{children:e.jsx(N,{})}),e.jsxs(b,{children:[e.jsx(h,{value:"image",children:"Image"}),e.jsx(h,{value:"video",children:"Video"})]})]})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"category",children:"Category"}),e.jsxs(f,{value:s.category,onValueChange:t=>o({...s,category:t}),children:[e.jsx(v,{children:e.jsx(N,{placeholder:"Select category"})}),e.jsx(b,{children:F.map(t=>e.jsx(h,{value:t,children:t},t))})]})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"url",children:"Media URL"}),e.jsx(y,{id:"url",value:s.url,onChange:t=>o({...s,url:t.target.value}),placeholder:"/src/assets/image.jpg or https://youtube.com/...",required:!0})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"description",children:"Description"}),e.jsx(H,{id:"description",value:s.description,onChange:t=>o({...s,description:t.target.value}),rows:3,required:!0})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsxs(c,{type:"submit",className:"gradient-primary",children:[m?"Update":"Add"," Media"]}),e.jsx(c,{type:"button",variant:"outline",onClick:j,children:"Cancel"})]})]})]})]})]}),w?e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:g.length===0?e.jsx("div",{className:"col-span-full text-center py-12",children:e.jsx("p",{className:"text-muted-foreground text-lg",children:"No gallery items found. Add your first media item!"})}):g.map(t=>e.jsxs($,{className:"border-2 border-border overflow-hidden",children:[e.jsxs("div",{className:"relative aspect-video bg-muted",children:[t.type==="image"?e.jsx("img",{src:t.url,alt:t.title,className:"w-full h-full object-cover",onError:r=>{var i;r.currentTarget.style.display="none",(i=r.currentTarget.nextElementSibling)==null||i.classList.remove("hidden")}}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(C,{size:48,className:"text-muted-foreground"})}),e.jsx("div",{className:"hidden w-full h-full items-center justify-center",children:e.jsx(S,{size:48,className:"text-muted-foreground"})}),e.jsx("div",{className:"absolute top-2 left-2",children:e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${t.type==="image"?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800"}`,children:[t.type==="image"?e.jsx(S,{size:12,className:"inline mr-1"}):e.jsx(C,{size:12,className:"inline mr-1"}),t.type]})}),e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx("span",{className:"px-2 py-1 bg-black/50 text-white rounded-full text-xs",children:t.category})})]}),e.jsxs(B,{children:[e.jsx(O,{className:"text-lg font-display",children:t.title}),e.jsx(q,{children:t.description}),e.jsxs("div",{className:"flex justify-between items-center pt-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:new Date(t.created_at).toLocaleDateString()}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{variant:"outline",size:"sm",onClick:()=>z(t),children:e.jsx(W,{size:16})}),e.jsx(c,{variant:"outline",size:"sm",onClick:()=>A(t.id),children:e.jsx(X,{size:16})})]})]})]})]},t.id))})]})})]}),e.jsx(V,{})]})]})};export{be as default};
