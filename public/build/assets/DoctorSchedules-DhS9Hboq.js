import{r as o,j as e,C as N,B as n}from"./app-vJQ3I6dV.js";import{H as k}from"./Helmet-ERNuH1aE.js";import{C,b as E,c as D,d as T,a as A}from"./card-D_TdOCn4.js";import{I as y}from"./input-CqXuVT5z.js";import{L as u}from"./label-D96JMsxO.js";import{S as F,a as P,b as $,c as I,d as l}from"./select-DfWBD2AQ.js";import{N as z,F as B}from"./Footer-C4ODtmGP.js";import{D as q}from"./DoctorSidebar-CUDm7o0c.js";import{P as M}from"./plus-BmTXJjIw.js";import{C as U}from"./clock-5C4bvJto.js";import{S as H}from"./square-pen-CkTI6ara.js";import{T as L}from"./trash-2-Bp21obC8.js";import"./index-BdQq_4o_.js";import"./index-dSGg7dLG.js";import"./Combination-BbuKXahY.js";import"./index-Blj7CJ4q.js";import"./chevron-down-GzKXyq84.js";import"./users-sY8hfj1V.js";import"./stethoscope-NEaodfg8.js";import"./file-text-BocHAsOw.js";import"./message-square-tzPJS6d0.js";import"./pill-B7xmQjP1.js";const me=()=>{const[x,g]=o.useState([]),[p,c]=o.useState(!1),[r,m]=o.useState(null),[t,i]=o.useState({day_of_week:"",start_time:"",end_time:"",is_available:!0});o.useEffect(()=>{h()},[]);const h=async()=>{try{const a=localStorage.getItem("token"),s=await fetch("/api/doctor-schedules",{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});if(s.ok){const d=await s.json();g(d)}}catch(a){console.error("Error fetching schedules:",a)}},v=async a=>{if(a.preventDefault(),!t.day_of_week||!t.start_time||!t.end_time){alert("Please fill in all required fields");return}try{const s=localStorage.getItem("token"),d=r?`/api/doctor-schedules/${r.id}`:"/api/doctor-schedules",j=await fetch(d,{method:r?"PUT":"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify(t)});if(j.ok)h(),c(!1),m(null),i({day_of_week:"",start_time:"",end_time:"",is_available:!0}),alert(r?"Schedule updated successfully!":"Schedule added successfully!");else{const w=await j.json();alert("Error: "+(w.message||"Failed to save schedule"))}}catch(s){console.error("Error adding schedule:",s),alert("Network error. Please try again.")}},b=a=>{m(a),i({day_of_week:a.day_of_week,start_time:a.start_time,end_time:a.end_time,is_available:a.is_available}),c(!0)},_=async a=>{if(confirm("Are you sure you want to delete this schedule?"))try{const s=localStorage.getItem("token"),d=await fetch(`/api/doctor-schedules/${a}`,{method:"DELETE",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});if(d.ok)h(),alert("Schedule deleted successfully!");else{const f=await d.json();alert("Error: "+(f.message||"Failed to delete schedule"))}}catch(s){console.error("Error deleting schedule:",s),alert("Network error. Please try again.")}},S=()=>{c(!1),m(null),i({day_of_week:"",start_time:"",end_time:"",is_available:!0})};return e.jsxs(e.Fragment,{children:[e.jsx(k,{children:e.jsx("title",{children:"Schedule Management - Doctor Dashboard"})}),e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(z,{}),e.jsxs("div",{className:"flex pt-20",children:[e.jsx(q,{}),e.jsx("main",{className:"flex-1 px-6 py-8",children:e.jsxs("div",{className:"container mx-auto max-w-6xl",children:[e.jsxs("div",{className:"mb-8 animate-fade-in-up",children:[e.jsx("h1",{className:"text-4xl font-display font-bold text-gradient mb-4",children:"Schedule Management"}),e.jsx("p",{className:"text-xl text-muted-foreground",children:"Manage your weekly schedule and availability"})]}),e.jsxs(C,{className:"shadow-card border-border bg-card",children:[e.jsxs(E,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(D,{className:"flex items-center gap-2",children:[e.jsx(N,{className:"h-5 w-5 text-primary"}),"Weekly Schedule"]}),e.jsx(T,{children:"Your weekly availability slots"})]}),e.jsxs(n,{onClick:()=>c(!p),className:"gradient-primary shadow-elegant",children:[e.jsx(M,{className:"h-4 w-4 mr-2"}),r?"Cancel Edit":"Add Slot"]})]}),e.jsxs(A,{children:[p&&e.jsx("form",{onSubmit:v,className:"mb-6 p-4 border border-border rounded-lg bg-muted/30",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(u,{children:"Day of Week *"}),e.jsxs(F,{value:t.day_of_week,onValueChange:a=>i({...t,day_of_week:a}),children:[e.jsx(P,{children:e.jsx($,{placeholder:"Select day"})}),e.jsxs(I,{children:[e.jsx(l,{value:"monday",children:"Monday"}),e.jsx(l,{value:"tuesday",children:"Tuesday"}),e.jsx(l,{value:"wednesday",children:"Wednesday"}),e.jsx(l,{value:"thursday",children:"Thursday"}),e.jsx(l,{value:"friday",children:"Friday"}),e.jsx(l,{value:"saturday",children:"Saturday"}),e.jsx(l,{value:"sunday",children:"Sunday"})]})]})]}),e.jsxs("div",{children:[e.jsx(u,{children:"Start Time *"}),e.jsx(y,{type:"time",value:t.start_time,onChange:a=>i({...t,start_time:a.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(u,{children:"End Time *"}),e.jsx(y,{type:"time",value:t.end_time,onChange:a=>i({...t,end_time:a.target.value}),required:!0})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx(n,{type:"submit",className:"flex-1",children:r?"Update Schedule":"Add Schedule"}),r&&e.jsx(n,{type:"button",variant:"outline",onClick:S,children:"Cancel"})]})]})}),e.jsxs("div",{className:"space-y-4",children:[x.map(a=>e.jsxs("div",{className:"flex justify-between items-center p-4 border border-border rounded-lg bg-muted/50 hover:bg-muted transition-smooth",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${a.is_available?"bg-green-500":"bg-red-500"}`}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground",children:a.day_of_week.charAt(0).toUpperCase()+a.day_of_week.slice(1)}),e.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[e.jsx(U,{className:"h-3 w-3"}),a.start_time," - ",a.end_time]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs ${a.is_available?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:a.is_available?"Available":"Unavailable"}),e.jsx(n,{size:"sm",variant:"outline",onClick:()=>b(a),children:e.jsx(H,{className:"h-3 w-3"})}),e.jsx(n,{size:"sm",variant:"outline",onClick:()=>_(a.id),className:"text-red-600 hover:text-red-700",children:e.jsx(L,{className:"h-3 w-3"})})]})]},a.id)),x.length===0&&e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:'No schedules added yet. Click "Add Slot" to create your first schedule.'})]})]})]})]})})]}),e.jsx(B,{})]})]})};export{me as default};
