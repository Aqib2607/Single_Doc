import{r as p,a as f,m as _,n as b,j as e,B as C,L as N}from"./app-CqZTAXQs.js";import{H as w}from"./Helmet-_9kUDD4h.js";import{I as l}from"./input-B3iGnpsK.js";import{L as s}from"./label-C08YvVKi.js";import{T as m}from"./textarea-DFh78WnT.js";import{S as F,a as S,b as P,c as q,d as h}from"./select-kyrHhtxX.js";import{T as E,a as T,b as g}from"./tabs-Bk-_9sQW.js";import{C as R,b as A,c as D,d as z,a as L}from"./card-D499lNZa.js";import"./index-BdQq_4o_.js";import"./index-DZQ0Q8bZ.js";import"./Combination-Dx_fJcVm.js";import"./index-B4yZozrg.js";import"./chevron-down-CirB4ZwM.js";const Q=()=>{const[o,x]=p.useState("patient"),[r,j]=p.useState({name:"",email:"",password:"",password_confirmation:"",phone:"",specialization:"",license_number:"",bio:"",consultation_fee:"",date_of_birth:"",gender:"",address:"",emergency_contact_name:"",emergency_contact_phone:"",medical_history:"",allergies:""}),u=f(),{register:v}=_(),{toast:d}=b(),t=(a,i)=>{j(n=>({...n,[a]:i}))},y=async a=>{if(a.preventDefault(),r.password!==r.password_confirmation){d({title:"Registration failed",description:"Passwords do not match.",variant:"destructive"});return}try{const i=await v(r,o);if(i.success)d({title:"Registration successful",description:"Your account has been created!"}),setTimeout(()=>{const n=localStorage.getItem("user");if(n){const c=JSON.parse(n);u(c.role==="patient"?"/patient-dashboard":"/doctor-dashboard")}else u(o==="patient"?"/patient-dashboard":"/doctor-dashboard")},100);else{let n="Registration failed. Please try again.";if(i.errors)if(typeof i.errors=="string")n=i.errors;else if(i.errors.email)n=i.errors.email[0];else if(i.errors.password)n=i.errors.password[0];else{const c=Object.values(i.errors)[0];n=Array.isArray(c)?c[0]:c}d({title:"Registration failed",description:n,variant:"destructive"})}}catch{d({title:"Registration failed",description:"Network error. Please try again.",variant:"destructive"})}};return e.jsxs(e.Fragment,{children:[e.jsxs(w,{children:[e.jsx("title",{children:"Register - Healthcare Portal"}),e.jsx("meta",{name:"description",content:"Create your healthcare account"})]}),e.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 py-12 bg-background",children:e.jsxs(R,{className:"w-full max-w-2xl",children:[e.jsxs(A,{children:[e.jsx(D,{children:"Create Account"}),e.jsx(z,{children:"Register as a patient or doctor"})]}),e.jsxs(L,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx(s,{className:"mb-2 block",children:"I am a"}),e.jsx(E,{value:o,onValueChange:a=>x(a),children:e.jsxs(T,{className:"grid w-full grid-cols-2",children:[e.jsx(g,{value:"patient",children:"Patient"}),e.jsx(g,{value:"doctor",children:"Doctor"})]})})]}),e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"name",children:"Full Name"}),e.jsx(l,{id:"name",placeholder:"Enter your full name",value:r.name,onChange:a=>t("name",a.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"phone",children:"Phone"}),e.jsx(l,{id:"phone",placeholder:"Enter your phone",value:r.phone,onChange:a=>t("phone",a.target.value),required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"email",children:"Email"}),e.jsx(l,{id:"email",type:"email",placeholder:"Enter your email",value:r.email,onChange:a=>t("email",a.target.value),required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"password",children:"Password"}),e.jsx(l,{id:"password",type:"password",placeholder:"Enter your password",value:r.password,onChange:a=>t("password",a.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"password_confirmation",children:"Confirm Password"}),e.jsx(l,{id:"password_confirmation",type:"password",placeholder:"Confirm your password",value:r.password_confirmation,onChange:a=>t("password_confirmation",a.target.value),required:!0})]})]}),o==="doctor"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"specialization",children:"Specialization"}),e.jsx(l,{id:"specialization",placeholder:"e.g., Cardiology",value:r.specialization,onChange:a=>t("specialization",a.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"license_number",children:"License Number"}),e.jsx(l,{id:"license_number",placeholder:"Medical license number",value:r.license_number,onChange:a=>t("license_number",a.target.value),required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"consultation_fee",children:"Consultation Fee ($)"}),e.jsx(l,{id:"consultation_fee",type:"number",placeholder:"e.g., 150",value:r.consultation_fee,onChange:a=>t("consultation_fee",a.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"bio",children:"Bio"}),e.jsx(m,{id:"bio",placeholder:"Brief professional bio",value:r.bio,onChange:a=>t("bio",a.target.value),rows:3})]})]}),o==="patient"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"date_of_birth",children:"Date of Birth"}),e.jsx(l,{id:"date_of_birth",type:"date",value:r.date_of_birth,onChange:a=>t("date_of_birth",a.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"gender",children:"Gender"}),e.jsxs(F,{onValueChange:a=>t("gender",a),children:[e.jsx(S,{children:e.jsx(P,{placeholder:"Select gender"})}),e.jsxs(q,{children:[e.jsx(h,{value:"male",children:"Male"}),e.jsx(h,{value:"female",children:"Female"}),e.jsx(h,{value:"other",children:"Other"}),e.jsx(h,{value:"prefer-not-to-say",children:"Prefer not to say"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"address",children:"Address"}),e.jsx(m,{id:"address",placeholder:"Your full address",value:r.address,onChange:a=>t("address",a.target.value),required:!0,rows:2})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"emergency_contact_name",children:"Emergency Contact Name"}),e.jsx(l,{id:"emergency_contact_name",placeholder:"Contact person name",value:r.emergency_contact_name,onChange:a=>t("emergency_contact_name",a.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"emergency_contact_phone",children:"Emergency Contact Phone"}),e.jsx(l,{id:"emergency_contact_phone",placeholder:"Contact person phone",value:r.emergency_contact_phone,onChange:a=>t("emergency_contact_phone",a.target.value),required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"medical_history",children:"Medical History (Optional)"}),e.jsx(m,{id:"medical_history",placeholder:"Previous medical conditions, surgeries, etc.",value:r.medical_history,onChange:a=>t("medical_history",a.target.value),rows:2})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(s,{htmlFor:"allergies",children:"Allergies (Optional)"}),e.jsx(m,{id:"allergies",placeholder:"Known allergies to medications, foods, etc.",value:r.allergies,onChange:a=>t("allergies",a.target.value),rows:2})]})]}),e.jsxs(C,{type:"submit",className:"w-full gradient-primary",children:["Create ",o==="doctor"?"Doctor":"Patient"," Account"]})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Already have an account?"," ",e.jsx(N,{to:"/login",className:"text-primary hover:underline font-medium",children:"Sign in"})]})})]})]})})]})};export{Q as default};
