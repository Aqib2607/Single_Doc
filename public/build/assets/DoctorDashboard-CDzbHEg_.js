import{m as A,r as i,C as g,j as e,B as d,L as f}from"./app-DA_X3c2f.js";import{H as k}from"./Helmet-bH_TqkAV.js";import{C as l,b as c,c as m,a as x,d as j}from"./card-CAd50I3V.js";import{N as R,U as P,F as $}from"./Footer-BwMPzB3k.js";import{D as F}from"./DoctorSidebar-B1i9MS38.js";import{U as _}from"./users-C-bOkYcc.js";import{F as E}from"./file-text-CKOrfZ4E.js";import{A as u}from"./activity-osyH_fjd.js";import{E as D}from"./eye-DEJvY0vo.js";import{C as L}from"./clock-Bs5Dbpfe.js";import{S as z}from"./stethoscope-DMxwkN-8.js";import"./index-DxTWzPfI.js";import"./Combination-CDGqEdPP.js";import"./message-square-wLGzMr5n.js";import"./pill-CBQBhz4T.js";const Z=()=>{const{user:r}=A(),[t,h]=i.useState({satisfaction_rate:0,average_rating:0,total_reviews:0,today_appointments:0,total_patients:0}),[b,n]=i.useState([]),[S,v]=i.useState(!0),[p,N]=i.useState(!1),y=async()=>{try{const s=localStorage.getItem("token"),a=await fetch("/api/doctor-dashboard",{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json","Cache-Control":"no-cache"}});if(a.ok){const o=await a.json();h(o)}else console.error("Dashboard API error:",a.status,a.statusText),h({satisfaction_rate:0,average_rating:0,total_reviews:0,today_appointments:0,total_patients:0})}catch(s){console.error("Failed to fetch dashboard data:",s),h({satisfaction_rate:0,average_rating:0,total_reviews:0,today_appointments:0,total_patients:0})}},w=async()=>{try{const s=localStorage.getItem("token"),a=await fetch("/api/doctor/today-appointments",{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json","Cache-Control":"no-cache"}});if(a.ok){const o=await a.json();o.success?n(o.data):(console.error("Today appointments API error:",o.message),n([]))}else console.error("Today appointments fetch error:",a.status,a.statusText),n([])}catch(s){console.error("Failed to fetch today's appointments:",s),n([])}finally{v(!1)}};i.useEffect(()=>{(r==null?void 0:r.role)==="doctor"?(y(),w()):v(!1)},[r]);const C=async()=>{N(!0);try{(r==null?void 0:r.role)==="doctor"&&await Promise.all([y(),w()])}finally{N(!1)}},T=[{icon:_,label:"Total Patients",value:t.total_patients.toString(),color:"text-primary"},{icon:g,label:"Today's Appointments",value:t.today_appointments.toString(),color:"text-primary"},{icon:E,label:"Total Reviews",value:t.total_reviews.toString(),color:"text-primary"},{icon:u,label:"Average Rating",value:`${t.average_rating}/5`,color:"text-primary"}];return e.jsxs(e.Fragment,{children:[e.jsxs(k,{children:[e.jsx("title",{children:"Doctor Dashboard - Healthcare Portal"}),e.jsx("meta",{name:"description",content:"Manage your patients and appointments"})]}),e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(R,{}),e.jsxs("div",{className:"flex pt-20",children:[e.jsx(F,{}),e.jsx("main",{className:"flex-1 px-6 py-8",children:e.jsxs("div",{className:"container mx-auto max-w-6xl",children:[e.jsx("div",{className:"mb-12 animate-fade-in-up",children:e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-4xl md:text-5xl font-display font-bold text-gradient mb-2",children:["Welcome, Dr. ",r==null?void 0:r.name,"!"]}),e.jsx("p",{className:"text-xl text-muted-foreground",children:"Your practice dashboard overview"})]}),e.jsxs(d,{onClick:C,disabled:p,variant:"outline",className:"border-border",children:[e.jsx(u,{className:`h-4 w-4 mr-2 ${p?"animate-spin":""}`}),p?"Refreshing...":"Refresh Data"]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12",children:T.map((s,a)=>e.jsxs(l,{className:"shadow-card border-border bg-card hover:shadow-elegant transition-smooth animate-fade-in-up",style:{animationDelay:`${a*.1}s`},children:[e.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(m,{className:"text-sm font-medium text-foreground",children:s.label}),e.jsx(s.icon,{className:`h-5 w-5 ${s.color}`})]}),e.jsx(x,{children:e.jsx("div",{className:"text-3xl font-bold text-foreground",children:s.value})})]},a))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs(l,{className:"shadow-card border-border bg-card animate-fade-in-up",style:{animationDelay:"0.5s"},children:[e.jsxs(c,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(m,{className:"text-foreground flex items-center gap-2",children:[e.jsx(g,{className:"h-5 w-5 text-primary"}),"Today's Schedule"]}),e.jsx(j,{className:"text-muted-foreground",children:"Your appointments for today"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(f,{to:"/doctor/schedules",children:e.jsxs(d,{size:"sm",className:"gradient-primary shadow-elegant hover:shadow-glow",children:[e.jsx(g,{className:"h-4 w-4 mr-2"}),"Manage Schedules"]})}),e.jsx(f,{to:"/doctor/appointments",children:e.jsxs(d,{size:"sm",variant:"outline",className:"border-border",children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),"View All"]})})]})]}),e.jsx(x,{children:e.jsx("div",{className:"space-y-4",children:S?e.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"Loading appointments..."}):b.length>0?b.map((s,a)=>e.jsx("div",{className:"flex justify-between items-start p-4 border border-border rounded-lg bg-muted/50 hover:bg-muted transition-smooth",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`w-2 h-2 rounded-full mt-2 ${s.status==="confirmed"?"bg-green-500":s.status==="pending"?"bg-yellow-500":"bg-red-500"}`}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold text-foreground flex items-center gap-2",children:[e.jsx(P,{className:"h-4 w-4"}),s.patient_name]}),e.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[e.jsx(L,{className:"h-3 w-3"}),s.formatted_time]}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1 flex items-center gap-1",children:[e.jsx(z,{className:"h-3 w-3"}),s.purpose]}),e.jsxs("p",{className:"text-xs text-primary mt-1 capitalize",children:[s.status," â€¢ ",s.consultation_type]})]})]})},s.id||a)):e.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"No appointments scheduled for today"})})})]}),e.jsxs(l,{className:"shadow-card border-border bg-card animate-fade-in-up",style:{animationDelay:"0.6s"},children:[e.jsxs(c,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(m,{className:"text-foreground flex items-center gap-2",children:[e.jsx(_,{className:"h-5 w-5 text-primary"}),"Recent Patients"]}),e.jsx(j,{className:"text-muted-foreground",children:"Recently seen patients"})]}),e.jsx(f,{to:"/doctor/patients",children:e.jsxs(d,{size:"sm",variant:"outline",className:"border-border",children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),"View All"]})})]}),e.jsx(x,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-between items-start p-4 border border-border rounded-lg bg-muted/50 hover:bg-muted transition-smooth",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mt-2"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-foreground",children:"Sarah Wilson"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Last visit: March 10, 2025"}),e.jsx("p",{className:"text-sm text-primary mt-1",children:"Diagnosis: Hypertension"})]})]})}),e.jsx("div",{className:"flex justify-between items-start p-4 border border-border rounded-lg bg-muted/50 hover:bg-muted transition-smooth",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mt-2"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-foreground",children:"David Lee"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Last visit: March 8, 2025"}),e.jsx("p",{className:"text-sm text-primary mt-1",children:"Diagnosis: Type 2 Diabetes"})]})]})})]})})]})]}),e.jsx("div",{className:"mt-12",children:e.jsxs(l,{className:"shadow-card border-border bg-card animate-fade-in-up",style:{animationDelay:"0.7s"},children:[e.jsxs(c,{children:[e.jsxs(m,{className:"text-foreground flex items-center gap-2",children:[e.jsx(u,{className:"h-5 w-5 text-primary"}),"Practice Overview"]}),e.jsx(j,{className:"text-muted-foreground",children:"Key metrics and performance indicators"})]}),e.jsx(x,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center p-4 bg-muted/50 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-primary mb-2",children:[t.satisfaction_rate,"%"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Patient Satisfaction"}),e.jsx("div",{className:`text-xs mt-1 ${t.satisfaction_rate>=90?"text-green-600":t.satisfaction_rate>=70?"text-yellow-600":"text-red-600"}`,children:t.satisfaction_rate>=90?"Excellent":t.satisfaction_rate>=70?"Good":"Needs Improvement"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted/50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-primary mb-2",children:t.average_rating}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Average Rating"}),e.jsx("div",{className:`text-xs mt-1 ${t.average_rating>=4.5?"text-green-600":t.average_rating>=3.5?"text-yellow-600":"text-red-600"}`,children:t.average_rating>=4.5?"Outstanding":t.average_rating>=3.5?"Good":"Needs Improvement"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted/50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-primary mb-2",children:t.total_reviews}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Reviews"}),e.jsx("div",{className:"text-xs text-primary mt-1",children:"Patient Feedback"})]})]})})]})})]})})]}),e.jsx($,{})]})]})};export{Z as default};
