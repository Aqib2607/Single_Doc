import{r as l,j as e,C as y,B as h}from"./app-CEoN3nb7.js";import{H as g}from"./Helmet-BTcaEctK.js";import{C as b,b as v,c as N,d as _,a as S}from"./card-Db-WEhk7.js";import{I as u}from"./input-DZCcOFjF.js";import{L as o}from"./label-CarGSy8y.js";import{S as w,a as k,b as C,c as A,d as r}from"./select-CsICuhsU.js";import{N as D,F as T}from"./Footer-qMXzDiRv.js";import{D as E}from"./DoctorSidebar-ugTys2RU.js";import{P as F}from"./plus-DPZgs52g.js";import{C as I}from"./clock-Co820-Oy.js";import"./index-BdQq_4o_.js";import"./index-Bcg0Mu0T.js";import"./Combination-BghPHJq8.js";import"./index-Ckc2JoLc.js";import"./chevron-down-BNkW1fCs.js";import"./users-BUxCXu4p.js";import"./stethoscope-BzYB2mbc.js";import"./file-text-CHhrgst4.js";import"./message-square-DXyYJdc3.js";import"./pill-C3JZLNnZ.js";const ee=()=>{const[n,p]=l.useState([]),[c,m]=l.useState(!1),[s,d]=l.useState({day_of_week:"",start_time:"",end_time:"",is_available:!0});l.useEffect(()=>{x()},[]);const x=async()=>{try{const a=localStorage.getItem("token"),t=await fetch("/api/doctor-schedules",{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}});if(t.ok){const i=await t.json();p(i)}}catch(a){console.error("Error fetching schedules:",a)}},j=async a=>{if(a.preventDefault(),!s.day_of_week||!s.start_time||!s.end_time){alert("Please fill in all required fields");return}try{const t=localStorage.getItem("token"),i=await fetch("/api/doctor-schedules",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify(s)});if(i.ok)x(),m(!1),d({day_of_week:"",start_time:"",end_time:"",is_available:!0}),alert("Schedule added successfully!");else{const f=await i.json();alert("Error: "+(f.message||"Failed to add schedule"))}}catch(t){console.error("Error adding schedule:",t),alert("Network error. Please try again.")}};return e.jsxs(e.Fragment,{children:[e.jsx(g,{children:e.jsx("title",{children:"Appointments - Doctor Dashboard"})}),e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(D,{}),e.jsxs("div",{className:"flex pt-20",children:[e.jsx(E,{}),e.jsx("main",{className:"flex-1 px-6 py-8",children:e.jsxs("div",{className:"container mx-auto max-w-6xl",children:[e.jsxs("div",{className:"mb-8 animate-fade-in-up",children:[e.jsx("h1",{className:"text-4xl font-display font-bold text-gradient mb-4",children:"Schedule Management"}),e.jsx("p",{className:"text-xl text-muted-foreground",children:"Manage your weekly schedule and availability"})]}),e.jsxs(b,{className:"shadow-card border-border bg-card",children:[e.jsxs(v,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(N,{className:"flex items-center gap-2",children:[e.jsx(y,{className:"h-5 w-5 text-primary"}),"Today's Schedule"]}),e.jsx(_,{children:"Your appointments for today"})]}),e.jsxs(h,{onClick:()=>m(!c),className:"gradient-primary shadow-elegant",children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),"Add Slot"]})]}),e.jsxs(S,{children:[c&&e.jsx("form",{onSubmit:j,className:"mb-6 p-4 border border-border rounded-lg bg-muted/30",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(o,{children:"Day of Week *"}),e.jsxs(w,{value:s.day_of_week,onValueChange:a=>d({...s,day_of_week:a}),children:[e.jsx(k,{children:e.jsx(C,{placeholder:"Select day"})}),e.jsxs(A,{children:[e.jsx(r,{value:"monday",children:"Monday"}),e.jsx(r,{value:"tuesday",children:"Tuesday"}),e.jsx(r,{value:"wednesday",children:"Wednesday"}),e.jsx(r,{value:"thursday",children:"Thursday"}),e.jsx(r,{value:"friday",children:"Friday"}),e.jsx(r,{value:"saturday",children:"Saturday"}),e.jsx(r,{value:"sunday",children:"Sunday"})]})]})]}),e.jsxs("div",{children:[e.jsx(o,{children:"Start Time *"}),e.jsx(u,{type:"time",value:s.start_time,onChange:a=>d({...s,start_time:a.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(o,{children:"End Time *"}),e.jsx(u,{type:"time",value:s.end_time,onChange:a=>d({...s,end_time:a.target.value}),required:!0})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(h,{type:"submit",className:"w-full",children:"Add Schedule"})})]})}),e.jsxs("div",{className:"space-y-4",children:[n.map(a=>e.jsxs("div",{className:"flex justify-between items-center p-4 border border-border rounded-lg bg-muted/50 hover:bg-muted transition-smooth",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${a.is_available?"bg-green-500":"bg-red-500"}`}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground",children:a.day_of_week.charAt(0).toUpperCase()+a.day_of_week.slice(1)}),e.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[e.jsx(I,{className:"h-3 w-3"}),a.start_time," - ",a.end_time]})]})]}),e.jsx("span",{className:`px-2 py-1 rounded text-xs ${a.is_available?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:a.is_available?"Available":"Unavailable"})]},a.id)),n.length===0&&e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:'No schedules added yet. Click "Add Slot" to create your first schedule.'})]})]})]})]})})]}),e.jsx(T,{})]})]})};export{ee as default};
