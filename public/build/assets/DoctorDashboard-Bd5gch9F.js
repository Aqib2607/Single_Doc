import{m as S,r as n,C as g,j as e,L as N,B as p}from"./app-CA97xQT9.js";import{H as C}from"./Helmet-VFA4f7Dq.js";import{C as c,b as m,c as x,a as h,d as f}from"./card-gaL2e-uj.js";import{N as T,U as k,F as A}from"./Footer-rh8Alvxn.js";import{D as F}from"./DoctorSidebar-CdQqX0aC.js";import{U as v}from"./users-BRuT6zH1.js";import{F as $}from"./file-text-BjTYvuFp.js";import{A as y}from"./activity-Jryv4sN9.js";import{E as w}from"./eye-BeqMgcWa.js";import{C as E}from"./clock-BMvmk19V.js";import{S as L}from"./stethoscope-o9s58rJw.js";import"./index-BgJJ74YJ.js";import"./Combination-DVZWF5pO.js";import"./message-square-BGDqvfeV.js";import"./pill-DXTK-vPZ.js";const J=()=>{const{user:a}=S(),[s,j]=n.useState({satisfaction_rate:0,average_rating:0,total_reviews:0,today_appointments:0,total_patients:0}),[u,d]=n.useState([]),[_,b]=n.useState(!0);n.useEffect(()=>{const t=async()=>{try{const r=localStorage.getItem("token"),o=await fetch("/api/doctor-dashboard",{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});if(o.ok){const l=await o.json();j(l)}else j({satisfaction_rate:0,average_rating:0,total_reviews:0,today_appointments:0,total_patients:0})}catch(r){console.error("Failed to fetch dashboard data:",r)}},i=async()=>{try{const r=localStorage.getItem("token"),o=await fetch("/api/doctor/today-appointments",{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});if(o.ok){const l=await o.json();l.success?d(l.data):d([])}else d([])}catch(r){console.error("Failed to fetch today's appointments:",r),d([])}finally{b(!1)}};(a==null?void 0:a.role)==="doctor"?(t(),i()):b(!1)},[a]);const D=[{icon:v,label:"Total Patients",value:s.total_patients.toString(),color:"text-primary"},{icon:g,label:"Today's Appointments",value:s.today_appointments.toString(),color:"text-primary"},{icon:$,label:"Total Reviews",value:s.total_reviews.toString(),color:"text-primary"},{icon:y,label:"Average Rating",value:`${s.average_rating}/5`,color:"text-primary"}];return e.jsxs(e.Fragment,{children:[e.jsxs(C,{children:[e.jsx("title",{children:"Doctor Dashboard - Healthcare Portal"}),e.jsx("meta",{name:"description",content:"Manage your patients and appointments"})]}),e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(T,{}),e.jsxs("div",{className:"flex pt-20",children:[e.jsx(F,{}),e.jsx("main",{className:"flex-1 px-6 py-8",children:e.jsxs("div",{className:"container mx-auto max-w-6xl",children:[e.jsxs("div",{className:"mb-12 animate-fade-in-up",children:[e.jsxs("h1",{className:"text-4xl md:text-5xl font-display font-bold text-gradient mb-4",children:["Welcome, Dr. ",a==null?void 0:a.name,"!"]}),e.jsx("p",{className:"text-xl text-muted-foreground",children:"Your practice dashboard overview"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12",children:D.map((t,i)=>e.jsxs(c,{className:"shadow-card border-border bg-card hover:shadow-elegant transition-smooth animate-fade-in-up",style:{animationDelay:`${i*.1}s`},children:[e.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(x,{className:"text-sm font-medium text-foreground",children:t.label}),e.jsx(t.icon,{className:`h-5 w-5 ${t.color}`})]}),e.jsx(h,{children:e.jsx("div",{className:"text-3xl font-bold text-foreground",children:t.value})})]},i))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs(c,{className:"shadow-card border-border bg-card animate-fade-in-up",style:{animationDelay:"0.5s"},children:[e.jsxs(m,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(x,{className:"text-foreground flex items-center gap-2",children:[e.jsx(g,{className:"h-5 w-5 text-primary"}),"Today's Schedule"]}),e.jsx(f,{className:"text-muted-foreground",children:"Your appointments for today"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N,{to:"/doctor/schedules",children:e.jsxs(p,{size:"sm",className:"gradient-primary shadow-elegant hover:shadow-glow",children:[e.jsx(g,{className:"h-4 w-4 mr-2"}),"Manage Schedules"]})}),e.jsx(N,{to:"/doctor/appointments",children:e.jsxs(p,{size:"sm",variant:"outline",className:"border-border",children:[e.jsx(w,{className:"h-4 w-4 mr-2"}),"View All"]})})]})]}),e.jsx(h,{children:e.jsx("div",{className:"space-y-4",children:_?e.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"Loading appointments..."}):u.length>0?u.map((t,i)=>e.jsx("div",{className:"flex justify-between items-start p-4 border border-border rounded-lg bg-muted/50 hover:bg-muted transition-smooth",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`w-2 h-2 rounded-full mt-2 ${t.status==="confirmed"?"bg-green-500":t.status==="pending"?"bg-yellow-500":"bg-red-500"}`}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold text-foreground flex items-center gap-2",children:[e.jsx(k,{className:"h-4 w-4"}),t.patient_name]}),e.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[e.jsx(E,{className:"h-3 w-3"}),t.formatted_time]}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1 flex items-center gap-1",children:[e.jsx(L,{className:"h-3 w-3"}),t.purpose]}),e.jsxs("p",{className:"text-xs text-primary mt-1 capitalize",children:[t.status," â€¢ ",t.consultation_type]})]})]})},t.id||i)):e.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"No appointments scheduled for today"})})})]}),e.jsxs(c,{className:"shadow-card border-border bg-card animate-fade-in-up",style:{animationDelay:"0.6s"},children:[e.jsxs(m,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(x,{className:"text-foreground flex items-center gap-2",children:[e.jsx(v,{className:"h-5 w-5 text-primary"}),"Recent Patients"]}),e.jsx(f,{className:"text-muted-foreground",children:"Recently seen patients"})]}),e.jsxs(p,{size:"sm",variant:"outline",className:"border-border",children:[e.jsx(w,{className:"h-4 w-4 mr-2"}),"View All"]})]}),e.jsx(h,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-between items-start p-4 border border-border rounded-lg bg-muted/50 hover:bg-muted transition-smooth",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mt-2"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-foreground",children:"Sarah Wilson"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Last visit: March 10, 2025"}),e.jsx("p",{className:"text-sm text-primary mt-1",children:"Diagnosis: Hypertension"})]})]})}),e.jsx("div",{className:"flex justify-between items-start p-4 border border-border rounded-lg bg-muted/50 hover:bg-muted transition-smooth",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mt-2"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-foreground",children:"David Lee"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Last visit: March 8, 2025"}),e.jsx("p",{className:"text-sm text-primary mt-1",children:"Diagnosis: Type 2 Diabetes"})]})]})})]})})]})]}),e.jsx("div",{className:"mt-12",children:e.jsxs(c,{className:"shadow-card border-border bg-card animate-fade-in-up",style:{animationDelay:"0.7s"},children:[e.jsxs(m,{children:[e.jsxs(x,{className:"text-foreground flex items-center gap-2",children:[e.jsx(y,{className:"h-5 w-5 text-primary"}),"Practice Overview"]}),e.jsx(f,{className:"text-muted-foreground",children:"Key metrics and performance indicators"})]}),e.jsx(h,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center p-4 bg-muted/50 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-primary mb-2",children:[s.satisfaction_rate,"%"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Patient Satisfaction"}),e.jsx("div",{className:`text-xs mt-1 ${s.satisfaction_rate>=90?"text-green-600":s.satisfaction_rate>=70?"text-yellow-600":"text-red-600"}`,children:s.satisfaction_rate>=90?"Excellent":s.satisfaction_rate>=70?"Good":"Needs Improvement"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted/50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-primary mb-2",children:s.average_rating}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Average Rating"}),e.jsx("div",{className:`text-xs mt-1 ${s.average_rating>=4.5?"text-green-600":s.average_rating>=3.5?"text-yellow-600":"text-red-600"}`,children:s.average_rating>=4.5?"Outstanding":s.average_rating>=3.5?"Good":"Needs Improvement"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted/50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-primary mb-2",children:s.total_reviews}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Reviews"}),e.jsx("div",{className:"text-xs text-primary mt-1",children:"Patient Feedback"})]})]})})]})})]})})]}),e.jsx(A,{})]})]})};export{J as default};
