import{r as a,u as c,j as e,B as C}from"./app-CcNX9NP6.js";import{H as W}from"./Helmet-nTJcF9Uu.js";import{u as X,N as Y,F as Z}from"./Footer-v6ud3ayY.js";import{T as _,a as ee,b as N,c as w}from"./tabs-DAhfNakm.js";import{C as v,b as y,c as S,d as b,a as T,e as k}from"./card-BJmxbEzp.js";import{I as A}from"./input-CxWshufY.js";import{S as F,a as L,b as M,c as E,d as l}from"./select-D0d6QK4j.js";import{P as se}from"./pill-BqvYhxYS.js";import{T as te}from"./test-tube-CNlAAUc0.js";import{S as P}from"./search-Brhsrgm2.js";import"./index-B_6avS1Q.js";import"./Combination-DJjmy-yK.js";import"./index-BdQq_4o_.js";import"./index-B6T5409s.js";import"./chevron-down-gE_Ery-n.js";const ge=()=>{const{addToCart:H}=X(),[$,h]=a.useState([]),[z,p]=a.useState([]),[D,u]=a.useState([]),[V,j]=a.useState([]),[n,B]=a.useState(""),[d,I]=a.useState(""),[m,R]=a.useState("all"),[x,O]=a.useState("all"),[q,f]=a.useState(!0);a.useEffect(()=>{G(),J(),K()},[]);const G=async()=>{try{const s=await fetch("http://127.0.0.1:8000/api/medicines");if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const t=await s.json();h(Array.isArray(t)?t:[])}catch(s){console.error("Error fetching medicines:",s),c.error("Failed to load medicines"),h([])}},J=async()=>{try{const s=await fetch("http://127.0.0.1:8000/api/tests");if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const t=await s.json();p(Array.isArray(t)?t:[])}catch(s){console.error("Error fetching tests:",s),c.error("Failed to load tests"),p([])}},K=async()=>{try{const[s,t]=await Promise.all([fetch("http://127.0.0.1:8000/api/medicines/categories"),fetch("http://127.0.0.1:8000/api/tests/categories")]),i=s.ok?await s.json():[],r=t.ok?await t.json():[];u(Array.isArray(i)?i:[]),j(Array.isArray(r)?r:[]),f(!1)}catch(s){console.error("Error fetching categories:",s),c.error("Failed to load categories"),u([]),j([]),f(!1)}},Q=$.filter(s=>{var r,o;const t=((r=s.name)==null?void 0:r.toLowerCase().includes(n.toLowerCase()))||((o=s.description)==null?void 0:o.toLowerCase().includes(n.toLowerCase())),i=m==="all"||s.category===m;return t&&i}),U=z.filter(s=>{var r,o;const t=((r=s.name)==null?void 0:r.toLowerCase().includes(d.toLowerCase()))||((o=s.description)==null?void 0:o.toLowerCase().includes(d.toLowerCase())),i=x==="all"||s.category===x;return t&&i}),g=(s,t)=>{H({id:s.id.toString(),name:s.name,type:t,price:s.price,description:s.description}),c.success(`${s.name} added to cart`)};return e.jsxs(e.Fragment,{children:[e.jsxs(W,{children:[e.jsx("title",{children:"Medicine & Tests - Dr. Sarah Mitchell"}),e.jsx("meta",{name:"description",content:"Browse and order medicines and medical tests online"})]}),e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(Y,{}),e.jsx("main",{className:"pt-32 pb-20",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-display font-bold text-gradient mb-4",children:"Medicine & Tests"}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Order medications and book medical tests from the comfort of your home"})]}),q?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-lg text-muted-foreground",children:"Loading..."})}):e.jsxs(_,{defaultValue:"medicine",className:"max-w-6xl mx-auto",children:[e.jsxs(ee,{className:"grid w-full max-w-md mx-auto grid-cols-2 mb-8",children:[e.jsxs(N,{value:"medicine",className:"flex items-center gap-2",children:[e.jsx(se,{size:18}),"Medicine"]}),e.jsxs(N,{value:"tests",className:"flex items-center gap-2",children:[e.jsx(te,{size:18}),"Tests"]})]}),e.jsxs(w,{value:"medicine",className:"animate-fade-in",children:[e.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(P,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground",size:18}),e.jsx(A,{placeholder:"Search medicines...",value:n,onChange:s=>B(s.target.value),className:"pl-10"})]}),e.jsxs(F,{value:m,onValueChange:R,children:[e.jsx(L,{className:"w-full sm:w-48",children:e.jsx(M,{placeholder:"Category"})}),e.jsxs(E,{children:[e.jsx(l,{value:"all",children:"All Categories"}),D.map(s=>e.jsx(l,{value:s,children:s},s))]})]})]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:Q.map(s=>e.jsxs(v,{className:"hover:shadow-elegant transition-smooth",children:[e.jsxs(y,{children:[e.jsx(S,{children:s.name}),e.jsx(b,{children:s.description})]}),e.jsxs(T,{children:[e.jsxs("p",{className:"text-2xl font-bold text-primary",children:["$",typeof s.price=="number"?s.price.toFixed(2):parseFloat(s.price||"0").toFixed(2)]}),!s.inStock&&e.jsx("p",{className:"text-sm text-destructive mt-2",children:"Out of stock"})]}),e.jsx(k,{children:e.jsx(C,{onClick:()=>g(s,"medicine"),disabled:!s.inStock,className:"w-full gradient-primary",children:"Add to Cart"})})]},s.id))})]}),e.jsxs(w,{value:"tests",className:"animate-fade-in",children:[e.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(P,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground",size:18}),e.jsx(A,{placeholder:"Search tests...",value:d,onChange:s=>I(s.target.value),className:"pl-10"})]}),e.jsxs(F,{value:x,onValueChange:O,children:[e.jsx(L,{className:"w-full sm:w-48",children:e.jsx(M,{placeholder:"Category"})}),e.jsxs(E,{children:[e.jsx(l,{value:"all",children:"All Categories"}),V.map(s=>e.jsx(l,{value:s,children:s},s))]})]})]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:U.map(s=>e.jsxs(v,{className:"hover:shadow-elegant transition-smooth",children:[e.jsxs(y,{children:[e.jsx(S,{children:s.name}),e.jsx(b,{children:s.description})]}),e.jsxs(T,{children:[e.jsxs("p",{className:"text-2xl font-bold text-primary",children:["$",typeof s.price=="number"?s.price.toFixed(2):parseFloat(s.price||"0").toFixed(2)]}),!s.inStock&&e.jsx("p",{className:"text-sm text-destructive mt-2",children:"Currently unavailable"})]}),e.jsx(k,{children:e.jsx(C,{onClick:()=>g(s,"test"),disabled:!s.inStock,className:"w-full gradient-primary",children:"Add to Cart"})})]},s.id))})]})]})]})}),e.jsx(Z,{})]})]})};export{ge as default};
