import{m as _,r as l,C as g,j as e,L as D,B as v}from"./app-CEoN3nb7.js";import{H as S}from"./Helmet-BTcaEctK.js";import{C as n,b as c,c as m,a as x,d as p}from"./card-Db-WEhk7.js";import{N as C,F as k}from"./Footer-qMXzDiRv.js";import{D as A}from"./DoctorSidebar-ugTys2RU.js";import{U as b}from"./users-BUxCXu4p.js";import{F as T}from"./file-text-CHhrgst4.js";import{A as N}from"./activity-CLCgeKf9.js";import{P as F}from"./plus-DPZgs52g.js";import{C as P}from"./clock-Co820-Oy.js";import{E as R}from"./eye-3p-js2Mu.js";import"./index-Bcg0Mu0T.js";import"./Combination-BghPHJq8.js";import"./stethoscope-BzYB2mbc.js";import"./message-square-DXyYJdc3.js";import"./pill-C3JZLNnZ.js";const J=()=>{const{user:a}=_(),[t,f]=l.useState({satisfaction_rate:0,average_rating:0,total_reviews:0,today_appointments:0,total_patients:0}),[u,h]=l.useState([]),[y,j]=l.useState(!0);l.useEffect(()=>{const s=async()=>{try{const r=localStorage.getItem("token"),o=await fetch("/api/doctor-dashboard",{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});if(o.ok){const d=await o.json();f(d)}else f({satisfaction_rate:0,average_rating:0,total_reviews:0,today_appointments:0,total_patients:0})}catch(r){console.error("Failed to fetch dashboard data:",r)}},i=async()=>{j(!1);try{const r=localStorage.getItem("token"),o=await fetch("/api/doctor-schedules",{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});if(o.ok){const d=await o.json();console.log("Schedules received:",d),h(d)}else console.log("Response not ok:",o.status),h([])}catch(r){console.error("Failed to fetch schedule data:",r),h([])}};(a==null?void 0:a.role)==="doctor"?(s(),i()):j(!1)},[a]);const w=[{icon:b,label:"Total Patients",value:t.total_patients.toString(),color:"text-primary"},{icon:g,label:"Today's Appointments",value:t.today_appointments.toString(),color:"text-primary"},{icon:T,label:"Total Reviews",value:t.total_reviews.toString(),color:"text-primary"},{icon:N,label:"Average Rating",value:`${t.average_rating}/5`,color:"text-primary"}];return e.jsxs(e.Fragment,{children:[e.jsxs(S,{children:[e.jsx("title",{children:"Doctor Dashboard - Healthcare Portal"}),e.jsx("meta",{name:"description",content:"Manage your patients and appointments"})]}),e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(C,{}),e.jsxs("div",{className:"flex pt-20",children:[e.jsx(A,{}),e.jsx("main",{className:"flex-1 px-6 py-8",children:e.jsxs("div",{className:"container mx-auto max-w-6xl",children:[e.jsxs("div",{className:"mb-12 animate-fade-in-up",children:[e.jsxs("h1",{className:"text-4xl md:text-5xl font-display font-bold text-gradient mb-4",children:["Welcome, Dr. ",a==null?void 0:a.name,"!"]}),e.jsx("p",{className:"text-xl text-muted-foreground",children:"Your practice dashboard overview"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12",children:w.map((s,i)=>e.jsxs(n,{className:"shadow-card border-border bg-card hover:shadow-elegant transition-smooth animate-fade-in-up",style:{animationDelay:`${i*.1}s`},children:[e.jsxs(c,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(m,{className:"text-sm font-medium text-foreground",children:s.label}),e.jsx(s.icon,{className:`h-5 w-5 ${s.color}`})]}),e.jsx(x,{children:e.jsx("div",{className:"text-3xl font-bold text-foreground",children:s.value})})]},i))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs(n,{className:"shadow-card border-border bg-card animate-fade-in-up",style:{animationDelay:"0.5s"},children:[e.jsxs(c,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(m,{className:"text-foreground flex items-center gap-2",children:[e.jsx(g,{className:"h-5 w-5 text-primary"}),"Today's Schedule"]}),e.jsx(p,{className:"text-muted-foreground",children:"Your appointments for today"})]}),e.jsx(D,{to:"/doctor/schedules",children:e.jsxs(v,{size:"sm",className:"gradient-primary shadow-elegant hover:shadow-glow",children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),"Add Slot"]})})]}),e.jsx(x,{children:e.jsx("div",{className:"space-y-4",children:y?e.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"Loading schedule..."}):u.length>0?u.map((s,i)=>e.jsx("div",{className:"flex justify-between items-start p-4 border border-border rounded-lg bg-muted/50 hover:bg-muted transition-smooth",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`w-2 h-2 rounded-full mt-2 ${s.is_available?"bg-green-500":"bg-red-500"}`}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-foreground",children:s.is_available?"Available Slot":"Unavailable"}),e.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[e.jsx(g,{className:"h-3 w-3"}),s.day_of_week.charAt(0).toUpperCase()+s.day_of_week.slice(1)]}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1 flex items-center gap-1",children:[e.jsx(P,{className:"h-3 w-3"}),s.start_time," - ",s.end_time]})]})]})},i)):e.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"No schedule available for today"})})})]}),e.jsxs(n,{className:"shadow-card border-border bg-card animate-fade-in-up",style:{animationDelay:"0.6s"},children:[e.jsxs(c,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(m,{className:"text-foreground flex items-center gap-2",children:[e.jsx(b,{className:"h-5 w-5 text-primary"}),"Recent Patients"]}),e.jsx(p,{className:"text-muted-foreground",children:"Recently seen patients"})]}),e.jsxs(v,{size:"sm",variant:"outline",className:"border-border",children:[e.jsx(R,{className:"h-4 w-4 mr-2"}),"View All"]})]}),e.jsx(x,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex justify-between items-start p-4 border border-border rounded-lg bg-muted/50 hover:bg-muted transition-smooth",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mt-2"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-foreground",children:"Sarah Wilson"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Last visit: March 10, 2025"}),e.jsx("p",{className:"text-sm text-primary mt-1",children:"Diagnosis: Hypertension"})]})]})}),e.jsx("div",{className:"flex justify-between items-start p-4 border border-border rounded-lg bg-muted/50 hover:bg-muted transition-smooth",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mt-2"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-foreground",children:"David Lee"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Last visit: March 8, 2025"}),e.jsx("p",{className:"text-sm text-primary mt-1",children:"Diagnosis: Type 2 Diabetes"})]})]})})]})})]})]}),e.jsx("div",{className:"mt-12",children:e.jsxs(n,{className:"shadow-card border-border bg-card animate-fade-in-up",style:{animationDelay:"0.7s"},children:[e.jsxs(c,{children:[e.jsxs(m,{className:"text-foreground flex items-center gap-2",children:[e.jsx(N,{className:"h-5 w-5 text-primary"}),"Practice Overview"]}),e.jsx(p,{className:"text-muted-foreground",children:"Key metrics and performance indicators"})]}),e.jsx(x,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center p-4 bg-muted/50 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-primary mb-2",children:[t.satisfaction_rate,"%"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Patient Satisfaction"}),e.jsx("div",{className:`text-xs mt-1 ${t.satisfaction_rate>=90?"text-green-600":t.satisfaction_rate>=70?"text-yellow-600":"text-red-600"}`,children:t.satisfaction_rate>=90?"Excellent":t.satisfaction_rate>=70?"Good":"Needs Improvement"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted/50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-primary mb-2",children:t.average_rating}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Average Rating"}),e.jsx("div",{className:`text-xs mt-1 ${t.average_rating>=4.5?"text-green-600":t.average_rating>=3.5?"text-yellow-600":"text-red-600"}`,children:t.average_rating>=4.5?"Outstanding":t.average_rating>=3.5?"Good":"Needs Improvement"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted/50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-primary mb-2",children:t.total_reviews}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Reviews"}),e.jsx("div",{className:"text-xs text-primary mt-1",children:"Patient Feedback"})]})]})})]})})]})})]}),e.jsx(k,{})]})]})};export{J as default};
