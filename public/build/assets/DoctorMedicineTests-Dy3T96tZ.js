import{c as re,r as o,j as e,B as l,X as A}from"./app-CEoN3nb7.js";import{H as ae}from"./Helmet-BTcaEctK.js";import{C as F,b as q,c as I,d as z,a as P}from"./card-Db-WEhk7.js";import{I as d}from"./input-DZCcOFjF.js";import{L as n}from"./label-CarGSy8y.js";import{T as S}from"./textarea-BBwsMnbp.js";import{S as ie,a as ne,b as oe,c as ce,d as g}from"./select-CsICuhsU.js";import{T as le,a as de,b as $,c as B}from"./tabs-cf5neld8.js";import{N as me,F as he}from"./Footer-qMXzDiRv.js";import{D as ue}from"./DoctorSidebar-ugTys2RU.js";import{P as U}from"./pill-C3JZLNnZ.js";import{P as L}from"./plus-DPZgs52g.js";import{S as O}from"./square-pen-De6r2DRm.js";import{T as H}from"./trash-2-BXHwlNFd.js";import{T as V}from"./test-tube-60Oy5Dng.js";import"./index-BdQq_4o_.js";import"./index-Bcg0Mu0T.js";import"./Combination-BghPHJq8.js";import"./index-Ckc2JoLc.js";import"./chevron-down-BNkW1fCs.js";import"./users-BUxCXu4p.js";import"./stethoscope-BzYB2mbc.js";import"./file-text-CHhrgst4.js";import"./message-square-DXyYJdc3.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=re("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),$e=()=>{const[k,Q]=o.useState([]),[C,R]=o.useState([]),[X,y]=o.useState(!1),[G,b]=o.useState(!1),[u,_]=o.useState(null),[x,M]=o.useState(null),[j,f]=o.useState(!1),[v,c]=o.useState(""),[r,m]=o.useState({name:"",manufacturer:"",price:"",stock_quantity:"",description:"",dosage_form:"",strength:"",is_active:!0}),[a,h]=o.useState({name:"",category:"",price:"",duration_hours:"",description:"",sample_type:"",preparation_instructions:"",is_active:!0});o.useEffect(()=>{N(),T()},[]);const N=async()=>{try{const s=localStorage.getItem("token"),t=await fetch("/api/medicines",{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});if(t.ok){const i=await t.json();Q(i)}}catch(s){console.error("Error fetching medicines:",s)}},T=async()=>{try{const s=localStorage.getItem("token"),t=await fetch("/api/tests",{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});if(t.ok){const i=await t.json();R(i)}}catch(s){console.error("Error fetching tests:",s)}},K=async s=>{s.preventDefault(),c(""),f(!0);try{const t=localStorage.getItem("token"),i=u?`/api/medicines/${u.id}`:"/api/medicines",p=await fetch(i,{method:u?"PUT":"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify(r)});if(p.ok)await N(),D(),alert(u?"Medicine updated successfully!":"Medicine added successfully!");else{const w=await p.json().catch(()=>({message:"Unknown error occurred"}));c(w.message||"Failed to save medicine")}}catch(t){c("Network error: "+t.message)}finally{f(!1)}},W=async s=>{s.preventDefault(),c(""),f(!0);try{const t=localStorage.getItem("token"),i=x?`/api/tests/${x.id}`:"/api/tests",p=await fetch(i,{method:x?"PUT":"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify(a)});if(p.ok)await T(),E(),alert(x?"Test updated successfully!":"Test added successfully!");else{const w=await p.json().catch(()=>({message:"Unknown error occurred"}));c(w.message||"Failed to save test")}}catch(t){c("Network error: "+t.message)}finally{f(!1)}},Y=s=>{var t,i;_(s),m({name:s.name||"",manufacturer:s.manufacturer||"",price:((t=s.price)==null?void 0:t.toString())||"",stock_quantity:((i=s.stock_quantity)==null?void 0:i.toString())||"",description:s.description||"",dosage_form:s.dosage_form||"",strength:s.strength||"",is_active:s.is_active??!0}),y(!0),c("")},Z=s=>{var t,i;M(s),h({name:s.name||"",category:s.category||"",price:((t=s.price)==null?void 0:t.toString())||"",duration_hours:((i=s.duration_hours)==null?void 0:i.toString())||"",description:s.description||"",sample_type:s.sample_type||"",preparation_instructions:s.preparation_instructions||"",is_active:s.is_active??!0}),b(!0),c("")},ee=async s=>{if(confirm("Are you sure you want to delete this medicine?"))try{const t=localStorage.getItem("token");(await fetch(`/api/medicines/${s}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}})).ok&&(N(),alert("Medicine deleted successfully!"))}catch(t){console.error("Error deleting medicine:",t)}},se=async s=>{if(confirm("Are you sure you want to delete this test?"))try{const t=localStorage.getItem("token");(await fetch(`/api/tests/${s}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}})).ok&&(T(),alert("Test deleted successfully!"))}catch(t){console.error("Error deleting test:",t)}},D=()=>{m({name:"",manufacturer:"",price:"",stock_quantity:"",description:"",dosage_form:"",strength:"",is_active:!0}),_(null),y(!1),c("")},E=()=>{h({name:"",category:"",price:"",duration_hours:"",description:"",sample_type:"",preparation_instructions:"",is_active:!0}),M(null),b(!1),c("")};return e.jsxs(e.Fragment,{children:[e.jsx(ae,{children:e.jsx("title",{children:"Medicine & Tests - Doctor Dashboard"})}),e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(me,{}),e.jsxs("div",{className:"flex pt-20",children:[e.jsx(ue,{}),e.jsx("main",{className:"flex-1 px-6 py-8",children:e.jsxs("div",{className:"container mx-auto max-w-6xl",children:[e.jsxs("div",{className:"mb-8 animate-fade-in-up",children:[e.jsx("h1",{className:"text-4xl font-display font-bold text-gradient mb-4",children:"Medicine & Tests"}),e.jsx("p",{className:"text-xl text-muted-foreground",children:"Manage medicines and diagnostic tests"})]}),e.jsxs(le,{defaultValue:"medicines",className:"space-y-6",children:[e.jsxs(de,{className:"grid w-full grid-cols-2",children:[e.jsx($,{value:"medicines",children:"Medicines"}),e.jsx($,{value:"tests",children:"Tests"})]}),e.jsx(B,{value:"medicines",children:e.jsxs(F,{className:"shadow-card border-border bg-card",children:[e.jsxs(q,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(U,{className:"h-5 w-5 text-primary"}),"Medicine Inventory"]}),e.jsx(z,{children:"Manage medicine stock and information"})]}),e.jsxs(l,{onClick:()=>y(!0),className:"gradient-primary shadow-elegant",children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),"Add Medicine"]})]}),e.jsxs(P,{children:[X&&e.jsxs("form",{onSubmit:K,className:"mb-6 p-4 border border-border rounded-lg bg-muted/30",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:u?"Edit Medicine":"New Medicine"}),e.jsx(l,{type:"button",onClick:D,variant:"ghost",size:"sm",children:e.jsx(A,{className:"h-4 w-4"})})]}),v&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md text-red-700 text-sm",children:v}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{children:"Name *"}),e.jsx(d,{value:r.name,onChange:s=>m({...r,name:s.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Manufacturer"}),e.jsx(d,{value:r.manufacturer,onChange:s=>m({...r,manufacturer:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Price *"}),e.jsx(d,{type:"number",step:"0.01",value:r.price,onChange:s=>m({...r,price:s.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Stock Quantity *"}),e.jsx(d,{type:"number",value:r.stock_quantity,onChange:s=>m({...r,stock_quantity:s.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Dosage Form"}),e.jsx(d,{value:r.dosage_form,onChange:s=>m({...r,dosage_form:s.target.value}),placeholder:"e.g., Tablet, Capsule"})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Strength"}),e.jsx(d,{value:r.strength,onChange:s=>m({...r,strength:s.target.value}),placeholder:"e.g., 100mg"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx(n,{children:"Description"}),e.jsx(S,{value:r.description,onChange:s=>m({...r,description:s.target.value})})]}),e.jsx("div",{className:"col-span-2",children:e.jsx(l,{type:"submit",className:"w-full",disabled:j,children:j?"Saving...":u?"Update Medicine":"Add Medicine"})})]})]}),e.jsxs("div",{className:"space-y-4",children:[k.map(s=>e.jsxs("div",{className:"flex justify-between items-center p-4 border border-border rounded-lg bg-muted/50 hover:bg-muted transition-smooth",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(U,{className:"h-5 w-5 text-primary"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground",children:s.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Manufacturer: ",s.manufacturer||"N/A"]}),e.jsxs("p",{className:"text-sm text-primary flex items-center gap-1",children:[e.jsx(J,{className:"h-3 w-3"}),"$",s.price," | Stock: ",s.stock_quantity]}),s.strength&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Strength: ",s.strength]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(l,{onClick:()=>Y(s),size:"sm",variant:"outline",children:e.jsx(O,{className:"h-4 w-4"})}),e.jsx(l,{onClick:()=>ee(s.id),size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700",children:e.jsx(H,{className:"h-4 w-4"})})]})]},s.id)),k.length===0&&e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:'No medicines found. Click "Add Medicine" to create your first medicine entry.'})]})]})]})}),e.jsx(B,{value:"tests",children:e.jsxs(F,{className:"shadow-card border-border bg-card",children:[e.jsxs(q,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(V,{className:"h-5 w-5 text-primary"}),"Diagnostic Tests"]}),e.jsx(z,{children:"Manage available diagnostic tests"})]}),e.jsxs(l,{onClick:()=>b(!0),className:"gradient-primary shadow-elegant",children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),"Add Test"]})]}),e.jsxs(P,{children:[G&&e.jsxs("form",{onSubmit:W,className:"mb-6 p-4 border border-border rounded-lg bg-muted/30",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:x?"Edit Test":"New Test"}),e.jsx(l,{type:"button",onClick:E,variant:"ghost",size:"sm",children:e.jsx(A,{className:"h-4 w-4"})})]}),v&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md text-red-700 text-sm",children:v}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{children:"Name *"}),e.jsx(d,{value:a.name,onChange:s=>h({...a,name:s.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Category"}),e.jsxs(ie,{value:a.category,onValueChange:s=>h({...a,category:s}),children:[e.jsx(ne,{children:e.jsx(oe,{placeholder:"Select category"})}),e.jsxs(ce,{children:[e.jsx(g,{value:"Blood Test",children:"Blood Test"}),e.jsx(g,{value:"Imaging",children:"Imaging"}),e.jsx(g,{value:"Urine Test",children:"Urine Test"}),e.jsx(g,{value:"Cardiac",children:"Cardiac"}),e.jsx(g,{value:"Other",children:"Other"})]})]})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Price *"}),e.jsx(d,{type:"number",step:"0.01",value:a.price,onChange:s=>h({...a,price:s.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Duration (hours)"}),e.jsx(d,{type:"number",value:a.duration_hours,onChange:s=>h({...a,duration_hours:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(n,{children:"Sample Type"}),e.jsx(d,{value:a.sample_type,onChange:s=>h({...a,sample_type:s.target.value}),placeholder:"e.g., Blood, Urine"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx(n,{children:"Description"}),e.jsx(S,{value:a.description,onChange:s=>h({...a,description:s.target.value})})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx(n,{children:"Preparation Instructions"}),e.jsx(S,{value:a.preparation_instructions,onChange:s=>h({...a,preparation_instructions:s.target.value}),placeholder:"Instructions for patient preparation"})]}),e.jsx("div",{className:"col-span-2",children:e.jsx(l,{type:"submit",className:"w-full",disabled:j,children:j?"Saving...":x?"Update Test":"Add Test"})})]})]}),e.jsxs("div",{className:"space-y-4",children:[C.map(s=>e.jsxs("div",{className:"flex justify-between items-center p-4 border border-border rounded-lg bg-muted/50 hover:bg-muted transition-smooth",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(V,{className:"h-5 w-5 text-primary"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground",children:s.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Category: ",s.category||"N/A"]}),e.jsxs("p",{className:"text-sm text-primary flex items-center gap-1",children:[e.jsx(J,{className:"h-3 w-3"}),"$",s.price," | Duration: ",s.duration_hours||0,"h"]}),s.sample_type&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Sample: ",s.sample_type]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(l,{onClick:()=>Z(s),size:"sm",variant:"outline",children:e.jsx(O,{className:"h-4 w-4"})}),e.jsx(l,{onClick:()=>se(s.id),size:"sm",variant:"outline",className:"text-red-600 hover:text-red-700",children:e.jsx(H,{className:"h-4 w-4"})})]})]},s.id)),C.length===0&&e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:'No tests found. Click "Add Test" to create your first test entry.'})]})]})]})})]})]})})]}),e.jsx(he,{})]})]})};export{$e as default};
