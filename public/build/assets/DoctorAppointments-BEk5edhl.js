import{c as T,r as o,j as e,C as h,B as r,X as E}from"./app-vJQ3I6dV.js";import{H as _}from"./Helmet-ERNuH1aE.js";import{C as u,b as j,c as g,d as f,a as y}from"./card-D_TdOCn4.js";import{S as z,a as F,b as D,c as I,d as m}from"./select-DfWBD2AQ.js";import{N as $,F as B}from"./Footer-C4ODtmGP.js";import{D as H}from"./DoctorSidebar-CUDm7o0c.js";import{C as N}from"./clock-5C4bvJto.js";import{S as M}from"./square-pen-CkTI6ara.js";import{T as P}from"./trash-2-Bp21obC8.js";import"./index-BdQq_4o_.js";import"./index-dSGg7dLG.js";import"./Combination-BbuKXahY.js";import"./index-Blj7CJ4q.js";import"./chevron-down-GzKXyq84.js";import"./users-sY8hfj1V.js";import"./stethoscope-NEaodfg8.js";import"./file-text-BocHAsOw.js";import"./message-square-tzPJS6d0.js";import"./pill-B7xmQjP1.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=T("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),ne=()=>{const[p,b]=o.useState([]),[x,v]=o.useState([]),[w,n]=o.useState(null),[i,l]=o.useState({status:"",medical_notes:""});o.useEffect(()=>{c(),d()},[]);const c=async()=>{try{const t=localStorage.getItem("token");console.log("Fetching today appointments with token:",t?"Present":"Missing");const s=await fetch("/api/doctor/today-appointments",{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(console.log("Today appointments response status:",s.status),s.ok){const a=await s.json();console.log("Today appointments result:",a),b(a.success?a.data:[])}else{const a=await s.text();console.error("Today appointments error:",s.status,a)}}catch(t){console.error("Error fetching today appointments:",t)}},d=async()=>{try{const t=localStorage.getItem("token");console.log("Fetching all appointments with token:",t?"Present":"Missing");const s=await fetch("/api/doctor/appointments",{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(console.log("All appointments response status:",s.status),s.ok){const a=await s.json();console.log("All appointments result:",a),v(a.success?a.data:[])}else{const a=await s.text();console.error("All appointments error:",s.status,a)}}catch(t){console.error("Error fetching all appointments:",t)}},C=t=>{n(t.appointment_id),l({status:t.status,medical_notes:t.medical_notes||""})},A=async t=>{try{const s=localStorage.getItem("token");(await fetch(`/api/doctor/appointments/${t}`,{method:"PUT",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify(i)})).ok?(n(null),d(),c(),alert("Appointment updated successfully!")):alert("Failed to update appointment")}catch(s){console.error("Error updating appointment:",s),alert("Error updating appointment")}},k=async t=>{if(confirm("Are you sure you want to delete this appointment?"))try{const s=localStorage.getItem("token");(await fetch(`/api/doctor/appointments/${t}`,{method:"DELETE",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})).ok?(d(),c(),alert("Appointment deleted successfully!")):alert("Failed to delete appointment")}catch(s){console.error("Error deleting appointment:",s),alert("Error deleting appointment")}},S=()=>{n(null),l({status:"",medical_notes:""})};return e.jsxs(e.Fragment,{children:[e.jsx(_,{children:e.jsx("title",{children:"Appointments - Doctor Dashboard"})}),e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx($,{}),e.jsxs("div",{className:"flex pt-20",children:[e.jsx(H,{}),e.jsx("main",{className:"flex-1 px-6 py-8",children:e.jsxs("div",{className:"container mx-auto max-w-6xl",children:[e.jsxs("div",{className:"mb-8 animate-fade-in-up",children:[e.jsx("h1",{className:"text-4xl font-display font-bold text-gradient mb-4",children:"Appointments"}),e.jsx("p",{className:"text-xl text-muted-foreground",children:"View and manage your appointments"})]}),e.jsxs(u,{className:"shadow-card border-border bg-card",children:[e.jsx(j,{className:"flex flex-row items-center justify-between",children:e.jsxs("div",{children:[e.jsxs(g,{className:"flex items-center gap-2",children:[e.jsx(h,{className:"h-5 w-5 text-primary"}),"Today's Appointments"]}),e.jsx(f,{children:"Your appointments for today"})]})}),e.jsx(y,{children:e.jsxs("div",{className:"space-y-4",children:[p.map(t=>e.jsxs("div",{className:"flex justify-between items-center p-4 border border-border rounded-lg bg-muted/50 hover:bg-muted transition-smooth",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground",children:t.patient_name}),e.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[e.jsx(N,{className:"h-3 w-3"}),t.formatted_time]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t.purpose})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"px-2 py-1 rounded text-xs bg-blue-100 text-blue-800",children:t.consultation_type||"Consultation"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:t.status})]})]},t.id)),p.length===0&&e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No appointments scheduled for today."})]})})]}),e.jsxs(u,{className:"shadow-card border-border bg-card mt-8",children:[e.jsxs(j,{children:[e.jsxs(g,{className:"flex items-center gap-2",children:[e.jsx(h,{className:"h-5 w-5 text-primary"}),"All Appointments"]}),e.jsx(f,{children:"Complete list of your appointments"})]}),e.jsx(y,{children:e.jsxs("div",{className:"space-y-4",children:[x.map(t=>e.jsxs("div",{className:"flex justify-between items-center p-4 border border-border rounded-lg bg-muted/50 hover:bg-muted transition-smooth",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-foreground",children:t.patient_info.name}),e.jsxs("p",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[e.jsx(N,{className:"h-3 w-3"}),t.date_time.formatted]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:t.reason||"No reason provided"})]})]}),e.jsx("div",{className:"text-right",children:w===t.appointment_id?e.jsxs("div",{className:"space-y-2",children:[e.jsxs(z,{value:i.status,onValueChange:s=>l({...i,status:s}),children:[e.jsx(F,{className:"w-32",children:e.jsx(D,{})}),e.jsxs(I,{children:[e.jsx(m,{value:"pending",children:"Pending"}),e.jsx(m,{value:"confirmed",children:"Confirmed"}),e.jsx(m,{value:"cancelled",children:"Cancelled"})]})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(r,{size:"sm",onClick:()=>A(t.appointment_id),children:e.jsx(V,{className:"h-3 w-3"})}),e.jsx(r,{size:"sm",variant:"outline",onClick:S,children:e.jsx(E,{className:"h-3 w-3"})})]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs ${t.status==="confirmed"?"bg-green-100 text-green-800":t.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:t.status}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(r,{size:"sm",variant:"outline",onClick:()=>C(t),children:e.jsx(M,{className:"h-3 w-3"})}),e.jsx(r,{size:"sm",variant:"outline",onClick:()=>k(t.appointment_id),className:"text-red-600",children:e.jsx(P,{className:"h-3 w-3"})})]})]})})]},t.appointment_id)),x.length===0&&e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No appointments found."})]})})]})]})})]}),e.jsx(B,{})]})]})};export{ne as default};
