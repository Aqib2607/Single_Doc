import{c as Ne,m as ve,n as be,r as t,j as e,B as v}from"./app-CqZTAXQs.js";import{H as we}from"./Helmet-_9kUDD4h.js";import{I as n}from"./input-B3iGnpsK.js";import{L as o}from"./label-C08YvVKi.js";import{T as b}from"./textarea-DFh78WnT.js";import{S as le,a as ce,b as de,c as me,d as c}from"./select-kyrHhtxX.js";import{C as k,b as L,c as A,d as z,a as B}from"./card-D499lNZa.js";import{D as Ce,b as _e,a as Ee,c as Se,d as Fe,e as De,f as Pe}from"./dialog-BS9UMaFl.js";import{N as Te,U as d,M as ke,P as I,F as Le}from"./Footer-QgH-dXjF.js";import{S as he}from"./shield-C9D_Vsx0.js";import{S as Ae}from"./stethoscope-Bzd8xOH-.js";import{D as ze}from"./dollar-sign-CiqFZ3zH.js";import{T as Be}from"./triangle-alert-Cg7Z4Zrj.js";import{T as Ie}from"./trash-2-DuqFvTNp.js";import"./index-BdQq_4o_.js";import"./index-DZQ0Q8bZ.js";import"./Combination-Dx_fJcVm.js";import"./index-B4yZozrg.js";import"./chevron-down-CirB4ZwM.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=Ne("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),ta=()=>{const{user:a,logout:pe}=ve(),{toast:i}=be(),[m,p]=t.useState(!1),[M,x]=t.useState(""),[H,u]=t.useState(""),[g,f]=t.useState(""),[j,y]=t.useState(""),[O,q]=t.useState(""),[U,G]=t.useState(""),[w,V]=t.useState(""),[$,J]=t.useState(0),[R,Y]=t.useState(""),[C,Z]=t.useState(""),[K,Q]=t.useState(""),[W,X]=t.useState(""),[_,ee]=t.useState(""),[E,ae]=t.useState(""),[S,re]=t.useState(""),[h,se]=t.useState(""),[F,te]=t.useState(""),[D,xe]=t.useState(""),[N,ue]=t.useState(""),[ge,P]=t.useState(!1),oe=t.useCallback(async()=>{try{const r=localStorage.getItem("token"),l=await fetch("/api/doctor/profile",{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});if(l.ok){const s=await l.json();x(s.name),u(s.email),q(s.specialization),G(s.license_number),V(s.bio||""),f(s.phone||""),y(s.gender),J(s.consultation_fee)}else i({title:"Error",description:"Failed to load profile data.",variant:"destructive"})}catch{i({title:"Error",description:"Failed to load profile data.",variant:"destructive"})}},[i]),ne=t.useCallback(async()=>{try{const r=localStorage.getItem("token"),l=await fetch("/api/patient/profile",{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});if(l.ok){const s=await l.json();x(s.name),u(s.email),Y(s.date_of_birth||""),y(s.gender),f(s.phone||""),Z(s.address||""),Q(s.emergency_contact_name||""),X(s.emergency_contact_phone||""),ee(s.medical_history||""),ae(s.allergies||"")}else i({title:"Error",description:"Failed to load profile data.",variant:"destructive"})}catch{i({title:"Error",description:"Failed to load profile data.",variant:"destructive"})}},[i]);t.useEffect(()=>{(a==null?void 0:a.role)==="doctor"?oe():(a==null?void 0:a.role)==="patient"?ne():(x((a==null?void 0:a.name)||""),u((a==null?void 0:a.email)||""))},[a,oe,ne]);const fe=async r=>{r.preventDefault(),p(!0);try{const l=localStorage.getItem("token"),s={name:M,email:H};(a==null?void 0:a.role)==="doctor"?(s.specialization=O,s.license_number=U,s.bio=w,s.phone=g,s.gender=j,s.consultation_fee=$,h&&(s.current_password=S,s.new_password=h,s.new_password_confirmation=F)):(a==null?void 0:a.role)==="patient"&&(s.date_of_birth=R,s.gender=j,s.phone=g,s.address=C,s.emergency_contact_name=K,s.emergency_contact_phone=W,s.medical_history=_,s.allergies=E,h&&(s.current_password=S,s.new_password=h,s.new_password_confirmation=F));const T=(a==null?void 0:a.role)==="doctor"?"/api/doctor/profile":"/api/patient/profile",ie=await fetch(T,{method:"PUT",headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"},body:JSON.stringify(s)});if(ie.ok)i({title:"Profile updated",description:"Your profile information has been saved successfully."}),re(""),se(""),te("");else{const ye=await ie.json();i({title:"Error",description:ye.error||"Failed to update profile.",variant:"destructive"})}}catch{i({title:"Error",description:"Failed to update profile.",variant:"destructive"})}finally{p(!1)}},je=async()=>{if(N!=="DELETE"){i({title:"Error",description:"Please type 'DELETE' to confirm account deletion.",variant:"destructive"});return}try{p(!0);const r=localStorage.getItem("token"),l=(a==null?void 0:a.role)==="doctor"?"/api/doctor/profile":"/api/patient/profile",s=await fetch(l,{method:"DELETE",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"},body:JSON.stringify({password:D,confirmation:N})});if(s.ok)i({title:"Account deleted",description:"Your account has been permanently deleted."}),localStorage.removeItem("token"),pe(),window.location.href="/";else{const T=await s.json();i({title:"Error",description:T.error||"Failed to delete account.",variant:"destructive"})}}catch{i({title:"Error",description:"Failed to delete account.",variant:"destructive"})}finally{p(!1),P(!1)}};return e.jsxs(e.Fragment,{children:[e.jsxs(we,{children:[e.jsx("title",{children:"Profile - Healthcare Portal"}),e.jsx("meta",{name:"description",content:"Manage your profile information"})]}),e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(Te,{}),e.jsx("main",{className:"pt-24 px-4 py-8",children:e.jsxs("div",{className:"container mx-auto max-w-2xl",children:[e.jsxs("div",{className:"mb-12 animate-fade-in-up",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-display font-bold text-gradient mb-4",children:"Profile"}),e.jsx("p",{className:"text-xl text-muted-foreground",children:"Manage your personal information"})]}),e.jsxs(k,{className:"shadow-card border-border bg-card animate-fade-in-up",style:{animationDelay:"0.2s"},children:[e.jsxs(L,{children:[e.jsxs(A,{className:"text-foreground flex items-center gap-2",children:[e.jsx(d,{className:"h-5 w-5 text-primary"}),"Personal Information"]}),e.jsx(z,{className:"text-muted-foreground",children:"Update your personal details"})]}),e.jsx(B,{children:e.jsxs("form",{onSubmit:fe,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(o,{htmlFor:"role",className:"flex items-center gap-2",children:[e.jsx(he,{className:"h-4 w-4 text-primary"}),"Role"]}),e.jsx(n,{id:"role",value:(a==null?void 0:a.role)==="patient"?"Patient":"Doctor",disabled:!0,className:"capitalize bg-muted/50 border-border"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(o,{htmlFor:"name",className:"flex items-center gap-2",children:[e.jsx(d,{className:"h-4 w-4 text-primary"}),"Full Name"]}),e.jsx(n,{id:"name",value:M,onChange:r=>x(r.target.value),placeholder:"Enter your full name",className:"border-border focus:ring-primary transition-smooth",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(o,{htmlFor:"email",className:"flex items-center gap-2",children:[e.jsx(ke,{className:"h-4 w-4 text-primary"}),"Email"]}),e.jsx(n,{id:"email",type:"email",value:H,onChange:r=>u(r.target.value),placeholder:"Enter your email",className:"border-border focus:ring-primary transition-smooth",required:!0})]}),(a==null?void 0:a.role)==="patient"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(o,{htmlFor:"date_of_birth",className:"flex items-center gap-2",children:[e.jsx(d,{className:"h-4 w-4 text-primary"}),"Date of Birth"]}),e.jsx(n,{id:"date_of_birth",type:"date",value:R,onChange:r=>Y(r.target.value),className:"border-border focus:ring-primary transition-smooth"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(o,{htmlFor:"gender",className:"flex items-center gap-2",children:[e.jsx(d,{className:"h-4 w-4 text-primary"}),"Gender"]}),e.jsxs(le,{value:j,onValueChange:y,children:[e.jsx(ce,{className:"border-border focus:ring-primary transition-smooth",children:e.jsx(de,{placeholder:"Select your gender"})}),e.jsxs(me,{children:[e.jsx(c,{value:"male",children:"Male"}),e.jsx(c,{value:"female",children:"Female"}),e.jsx(c,{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(o,{htmlFor:"phone",className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-4 w-4 text-primary"}),"Phone Number"]}),e.jsx(n,{id:"phone",value:g,onChange:r=>f(r.target.value),placeholder:"Enter your phone number",className:"border-border focus:ring-primary transition-smooth"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"address",children:"Address"}),e.jsx(b,{id:"address",value:C,onChange:r=>Z(r.target.value),placeholder:"Enter your home address",className:"border-border focus:ring-primary transition-smooth min-h-[80px]",maxLength:500}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[C.length,"/500 characters"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(o,{htmlFor:"emergency_contact_name",className:"flex items-center gap-2",children:[e.jsx(d,{className:"h-4 w-4 text-primary"}),"Emergency Contact Name"]}),e.jsx(n,{id:"emergency_contact_name",value:K,onChange:r=>Q(r.target.value),placeholder:"Emergency contact person's name",className:"border-border focus:ring-primary transition-smooth"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(o,{htmlFor:"emergency_contact_phone",className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-4 w-4 text-primary"}),"Emergency Contact Phone"]}),e.jsx(n,{id:"emergency_contact_phone",value:W,onChange:r=>X(r.target.value),placeholder:"Emergency contact phone number",className:"border-border focus:ring-primary transition-smooth"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"medical_history",children:"Medical History"}),e.jsx(b,{id:"medical_history",value:_,onChange:r=>ee(r.target.value),placeholder:"Previous surgeries, chronic conditions, medications, etc.",className:"border-border focus:ring-primary transition-smooth min-h-[100px]",maxLength:2e3}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[_.length,"/2000 characters"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"allergies",children:"Allergies"}),e.jsx(b,{id:"allergies",value:E,onChange:r=>ae(r.target.value),placeholder:"Food allergies, drug allergies, environmental allergies, etc.",className:"border-border focus:ring-primary transition-smooth min-h-[80px]",maxLength:1e3}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[E.length,"/1000 characters"]})]})]}),(a==null?void 0:a.role)==="doctor"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(o,{htmlFor:"specialization",className:"flex items-center gap-2",children:[e.jsx(Ae,{className:"h-4 w-4 text-primary"}),"Specialization"]}),e.jsx(n,{id:"specialization",value:O,onChange:r=>q(r.target.value),placeholder:"e.g., Cardiology, General Medicine",className:"border-border focus:ring-primary transition-smooth",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(o,{htmlFor:"license_number",className:"flex items-center gap-2",children:[e.jsx(he,{className:"h-4 w-4 text-primary"}),"License Number"]}),e.jsx(n,{id:"license_number",value:U,onChange:r=>G(r.target.value),placeholder:"Enter your medical license number",className:"border-border focus:ring-primary transition-smooth",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(o,{htmlFor:"phone",className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-4 w-4 text-primary"}),"Phone Number"]}),e.jsx(n,{id:"phone",value:g,onChange:r=>f(r.target.value),placeholder:"Enter your phone number",className:"border-border focus:ring-primary transition-smooth"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(o,{htmlFor:"gender",className:"flex items-center gap-2",children:[e.jsx(d,{className:"h-4 w-4 text-primary"}),"Gender"]}),e.jsxs(le,{value:j,onValueChange:y,children:[e.jsx(ce,{className:"border-border focus:ring-primary transition-smooth",children:e.jsx(de,{placeholder:"Select your gender"})}),e.jsxs(me,{children:[e.jsx(c,{value:"male",children:"Male"}),e.jsx(c,{value:"female",children:"Female"}),e.jsx(c,{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(o,{htmlFor:"consultation_fee",className:"flex items-center gap-2",children:[e.jsx(ze,{className:"h-4 w-4 text-primary"}),"Consultation Fee"]}),e.jsx(n,{id:"consultation_fee",type:"number",step:"0.01",min:"0",value:$,onChange:r=>J(parseFloat(r.target.value)||0),placeholder:"Enter consultation fee",className:"border-border focus:ring-primary transition-smooth",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"bio",children:"Bio/About"}),e.jsx(b,{id:"bio",value:w,onChange:r=>V(r.target.value),placeholder:"Tell patients about your experience, expertise, and approach to healthcare...",className:"border-border focus:ring-primary transition-smooth min-h-[100px]",maxLength:1e3}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[w.length,"/1000 characters"]})]})]}),e.jsx(v,{type:"submit",className:"w-full gradient-primary shadow-elegant hover:shadow-glow transition-smooth",disabled:m,children:m?"Saving...":"Save Changes"})]})})]}),((a==null?void 0:a.role)==="doctor"||(a==null?void 0:a.role)==="patient")&&e.jsxs(k,{className:"shadow-card border-border bg-card animate-fade-in-up",style:{animationDelay:"0.4s"},children:[e.jsxs(L,{children:[e.jsxs(A,{className:"text-foreground flex items-center gap-2",children:[e.jsx(Me,{className:"h-5 w-5 text-primary"}),"Change Password"]}),e.jsx(z,{className:"text-muted-foreground",children:"Update your account password"})]}),e.jsxs(B,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"current_password",children:"Current Password"}),e.jsx(n,{id:"current_password",type:"password",value:S,onChange:r=>re(r.target.value),placeholder:"Enter your current password",className:"border-border focus:ring-primary transition-smooth"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"new_password",children:"New Password"}),e.jsx(n,{id:"new_password",type:"password",value:h,onChange:r=>se(r.target.value),placeholder:"Enter new password (min 8 characters)",className:"border-border focus:ring-primary transition-smooth",minLength:8})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"confirm_new_password",children:"Confirm New Password"}),e.jsx(n,{id:"confirm_new_password",type:"password",value:F,onChange:r=>te(r.target.value),placeholder:"Confirm your new password",className:"border-border focus:ring-primary transition-smooth"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Leave password fields empty if you don't want to change your password."})]})]}),((a==null?void 0:a.role)==="doctor"||(a==null?void 0:a.role)==="patient")&&e.jsxs(k,{className:"shadow-card border-red-200 bg-card animate-fade-in-up border-2",style:{animationDelay:"0.6s"},children:[e.jsxs(L,{children:[e.jsxs(A,{className:"text-red-600 flex items-center gap-2",children:[e.jsx(Be,{className:"h-5 w-5"}),"Danger Zone"]}),e.jsxs(z,{className:"text-muted-foreground",children:["Permanently delete your ",a==null?void 0:a.role," account and all associated data"]})]}),e.jsx(B,{children:e.jsxs(Ce,{open:ge,onOpenChange:P,children:[e.jsx(_e,{asChild:!0,children:e.jsxs(v,{variant:"destructive",className:"w-full",children:[e.jsx(Ie,{className:"h-4 w-4 mr-2"}),"Delete Account Permanently"]})}),e.jsxs(Ee,{children:[e.jsxs(Se,{children:[e.jsx(Fe,{className:"text-red-600",children:"Delete Account"}),e.jsxs(De,{children:["This action cannot be undone. This will permanently delete your ",a==null?void 0:a.role," account and remove all your data from our servers."]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"delete_password",children:"Password"}),e.jsx(n,{id:"delete_password",type:"password",value:D,onChange:r=>xe(r.target.value),placeholder:"Enter your password to confirm",className:"border-border focus:ring-primary transition-smooth"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(o,{htmlFor:"delete_confirmation",children:["Type ",e.jsx("strong",{children:"DELETE"})," to confirm"]}),e.jsx(n,{id:"delete_confirmation",value:N,onChange:r=>ue(r.target.value),placeholder:"DELETE",className:"border-border focus:ring-primary transition-smooth"})]})]}),e.jsxs(Pe,{children:[e.jsx(v,{variant:"outline",onClick:()=>P(!1),disabled:m,children:"Cancel"}),e.jsx(v,{variant:"destructive",onClick:je,disabled:m||D===""||N!=="DELETE",children:m?"Deleting...":"Delete Account"})]})]})]})})]})]})}),e.jsx(Le,{})]})]})};export{ta as default};
